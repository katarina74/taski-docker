name: Test SSH Key

on: [push]

jobs:
  test-key:
    runs-on: ubuntu-latest
    steps:
      - name: Debug SSH Key
        run: |
          mkdir -p ~/.ssh
          echo "${{ secrets.SSH_KEY }}" > ~/.ssh/test_key
          chmod 600 ~/.ssh/test_key
          
          echo "=== Key content (first line) ==="
          head -1 ~/.ssh/test_key
          
          echo "=== Key validation ==="
          ssh-keygen -l -f ~/.ssh/test_key || echo "KEY INVALID!"
          
          echo "=== Full key (masked) ==="
          cat ~/.ssh/test_key | sed 's/./*/g'